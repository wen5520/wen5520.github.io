(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{224:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){this._self._c;return this._m(0)}),[function(){var s=this,t=s._self._c;return t("div",{staticClass:"content"},[t("h3",{attrs:{id:"jenkins-shell-构建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-shell-构建"}},[s._v("#")]),s._v(" jenkins shell 构建")]),s._v(" "),t("h3",{attrs:{id:"正式环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正式环境配置"}},[s._v("#")]),s._v(" 正式环境配置")]),s._v(" "),t("p",[s._v("1、构建")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("echo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xiaofang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),s._v("\nnode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\nnpm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n\nnpx browserslist@latest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("update"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("db\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set config'")]),s._v("\nnpm config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("laoyaojing"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("npm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("coding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xiaofang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xz"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("components"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'run install'")]),s._v("\nnpm install\nnpm install pdfjs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dist@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".228")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'run build'")]),s._v("\nnpm run build\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'build dist'")]),s._v("\ncd dist\nrm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\ntar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zcvf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("2、构建后")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("\tSource files"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n    Remove prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("dist\n    Remote directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xiaofang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist\n    Exec command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                cd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xiaofang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n                mkdir dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                mv dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                cd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                tar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zxvf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n                cd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n                mv dist dist2  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak dist\n                rm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" rm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"测试环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试环境配置"}},[s._v("#")]),s._v(" 测试环境配置")]),s._v(" "),t("p",[s._v("1、构建")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("echo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xiaofang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),s._v("\nnode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\nnpm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'run install'")]),s._v("\nnpm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("taobao"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'run build'")]),s._v("\nnpm run build\n\necho "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'build dist'")]),s._v("\ncd dist\nrm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\ntar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zcvf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("2、构建后")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("\tSource files"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n    Remove prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("dist\n    Remote directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ceshixf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist\n    Exec command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n                cd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ceshixf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n                mkdir dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                mv dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                cd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n                tar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zxvf dist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n                cd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n                mv dist dist2  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak dist\n                rm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" rm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf dist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bak\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("==================")]),s._v(" "),t("p",[s._v("echo [testjenkins] $PATH\nnode -v\nnpm -v")]),s._v(" "),t("p",[s._v("npx browserslist@latest --update-db")]),s._v(" "),t("p",[s._v("echo 'set config'\nnpm config set registery=https://e.coding.net/iskeys/testjenkins.git")]),s._v(" "),t("p",[s._v("dist/dist.tar.gz")]),s._v(" "),t("p",[s._v("dist")]),s._v(" "),t("p",[s._v("/data/project/test/dist")]),s._v(" "),t("p",[s._v("cd /data/project/test\nmkdir dist-bak\nmv dist/dist.tar.gz ./dist-bak\ncd ./dist-bak\ntar -zxvf dist.tar.gz\ncd ../\nmv dist dist2  && mv dist-bak dist\nrm -rf dist2 && rm -rf dist-bak")])])}],!1,null,null,null);t.default=r.exports}}]);